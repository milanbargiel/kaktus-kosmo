<template name="Planet_page">
  <div class="secondary-navigation">
    <!-- user needs to login to insert a thought -->
    {{#if currentUser}}
      <a class="js-post-create link u-right-top">INSERT A <br>THOUGHT</a>
    {{else}}
      <a class="link u-right-top" href="/login">LOGIN TO <br>INSERT A THOUGHT</a>
    {{/if}}
  </div>

  {{> dialogue dialogueArgs}}

  <div class="container">
    {{#if Template.subscriptionsReady}}
      {{> filter filterArgs}}
    {{/if}}
    
    <div class="visualization visualization--planet">
      {{#if Template.subscriptionsReady}}
        <h1 class="visualization__header">{{getProjectName}}</h1>
      {{else}}
        {{> spinner}}
      {{/if}}
    </div>
    
    {{#if Template.subscriptionsReady}}
      <div class="content">
        {{#if showCreatePost}}
          {{> Post_create getProjectId}}
        {{else}}
          <!-- when a post is selected show content view -->
          {{#if contentViewArgs.post}}
            {{> Post_contentView contentViewArgs}}
          {{/if}}
        {{/if}}
      </div>
    {{/if}}
  </div>
</template>